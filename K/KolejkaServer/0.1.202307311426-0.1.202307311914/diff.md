# Comparing `tmp/KolejkaServer-0.1.202307311426-py3-none-any.whl.zip` & `tmp/KolejkaServer-0.1.202307311914-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,13 +1,13 @@
-Zip file size: 27966 bytes, number of entries: 67
--rw-rw-r--  2.0 unx      544 b- defN 23-Jul-31 14:29 KolejkaServer-0.1.202307311426-nspkg.pth
+Zip file size: 28249 bytes, number of entries: 67
+-rw-rw-r--  2.0 unx      544 b- defN 23-Jul-31 19:17 KolejkaServer-0.1.202307311914-nspkg.pth
 -rw-rw-r--  2.0 unx      334 b- defN 22-Nov-13 18:28 kolejka/server/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/__nonpath__.py
 -rw-rw-r--  2.0 unx      804 b- defN 22-Nov-13 18:28 kolejka/server/response.py
--rw-rw-r--  2.0 unx     3351 b- defN 23-Jul-31 14:28 kolejka/server/settings.py
+-rw-rw-r--  2.0 unx     3391 b- defN 23-Jul-31 19:16 kolejka/server/settings.py
 -rw-rw-r--  2.0 unx      558 b- defN 22-Nov-13 18:28 kolejka/server/urls.py
 -rw-rw-r--  2.0 unx      268 b- defN 22-Nov-13 18:28 kolejka/server/wsgi.py
 -rw-rw-r--  2.0 unx        0 b- defN 21-Oct-15 20:20 kolejka/server/blob/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/blob/__nonpath__.py
 -rw-rw-r--  2.0 unx      280 b- defN 22-Nov-13 18:28 kolejka/server/blob/admin.py
 -rw-rw-r--  2.0 unx     3473 b- defN 22-Nov-13 18:28 kolejka/server/blob/models.py
 -rw-rw-r--  2.0 unx      101 b- defN 22-Nov-13 18:28 kolejka/server/blob/tests.py
@@ -44,26 +44,26 @@
 -rw-rw-r--  2.0 unx      774 b- defN 22-Nov-13 18:28 kolejka/server/queue/management/commands/unassign.py
 -rw-rw-r--  2.0 unx        0 b- defN 21-Oct-15 20:20 kolejka/server/task/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/task/__nonpath__.py
 -rw-rw-r--  2.0 unx      274 b- defN 22-Nov-13 18:28 kolejka/server/task/admin.py
 -rw-rw-r--  2.0 unx     2105 b- defN 22-Nov-13 18:28 kolejka/server/task/models.py
 -rw-rw-r--  2.0 unx      101 b- defN 22-Nov-13 18:28 kolejka/server/task/tests.py
 -rw-rw-r--  2.0 unx      298 b- defN 22-Nov-13 18:28 kolejka/server/task/urls.py
--rw-rw-r--  2.0 unx     8550 b- defN 23-Jul-31 14:28 kolejka/server/task/views.py
+-rw-rw-r--  2.0 unx     9390 b- defN 23-Jul-31 19:16 kolejka/server/task/views.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/task/management/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/task/management/__nonpath__.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/task/management/commands/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/task/management/commands/__nonpath__.py
 -rw-rw-r--  2.0 unx      844 b- defN 23-Jan-19 17:32 kolejka/server/task/management/commands/lstask.py
 -rw-rw-r--  2.0 unx      812 b- defN 22-Nov-13 18:28 kolejka/server/task/management/commands/rmtask.py
 -rw-rw-r--  2.0 unx     2044 b- defN 20-Apr-27 12:38 kolejka/server/task/migrations/0001_initial.py
 -rw-rw-r--  2.0 unx        0 b- defN 20-Apr-27 12:38 kolejka/server/task/migrations/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/task/migrations/__nonpath__.py
 -rw-rw-r--  2.0 unx        0 b- defN 21-Oct-15 20:20 kolejka/server/templates/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 22-Nov-13 18:28 kolejka/server/templates/__nonpath__.py
--rw-rw-r--  2.0 unx      510 b- defN 23-Jul-31 14:29 KolejkaServer-0.1.202307311426.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-Jul-31 14:29 KolejkaServer-0.1.202307311426.dist-info/WHEEL
--rw-rw-r--  2.0 unx       56 b- defN 23-Jul-31 14:29 KolejkaServer-0.1.202307311426.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx        8 b- defN 23-Jul-31 14:29 KolejkaServer-0.1.202307311426.dist-info/namespace_packages.txt
--rw-rw-r--  2.0 unx        8 b- defN 23-Jul-31 14:29 KolejkaServer-0.1.202307311426.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     6224 b- defN 23-Jul-31 14:29 KolejkaServer-0.1.202307311426.dist-info/RECORD
-67 files, 55912 bytes uncompressed, 17706 bytes compressed:  68.3%
+-rw-rw-r--  2.0 unx      510 b- defN 23-Jul-31 19:17 KolejkaServer-0.1.202307311914.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jul-31 19:17 KolejkaServer-0.1.202307311914.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       56 b- defN 23-Jul-31 19:17 KolejkaServer-0.1.202307311914.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx        8 b- defN 23-Jul-31 19:17 KolejkaServer-0.1.202307311914.dist-info/namespace_packages.txt
+-rw-rw-r--  2.0 unx        8 b- defN 23-Jul-31 19:17 KolejkaServer-0.1.202307311914.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     6224 b- defN 23-Jul-31 19:17 KolejkaServer-0.1.202307311914.dist-info/RECORD
+67 files, 56792 bytes uncompressed, 17989 bytes compressed:  68.3%
```

## zipnote {}

```diff
@@ -1,8 +1,8 @@
-Filename: KolejkaServer-0.1.202307311426-nspkg.pth
+Filename: KolejkaServer-0.1.202307311914-nspkg.pth
 Comment: 
 
 Filename: kolejka/server/__init__.py
 Comment: 
 
 Filename: kolejka/server/__nonpath__.py
 Comment: 
@@ -177,26 +177,26 @@
 
 Filename: kolejka/server/templates/__init__.py
 Comment: 
 
 Filename: kolejka/server/templates/__nonpath__.py
 Comment: 
 
-Filename: KolejkaServer-0.1.202307311426.dist-info/METADATA
+Filename: KolejkaServer-0.1.202307311914.dist-info/METADATA
 Comment: 
 
-Filename: KolejkaServer-0.1.202307311426.dist-info/WHEEL
+Filename: KolejkaServer-0.1.202307311914.dist-info/WHEEL
 Comment: 
 
-Filename: KolejkaServer-0.1.202307311426.dist-info/entry_points.txt
+Filename: KolejkaServer-0.1.202307311914.dist-info/entry_points.txt
 Comment: 
 
-Filename: KolejkaServer-0.1.202307311426.dist-info/namespace_packages.txt
+Filename: KolejkaServer-0.1.202307311914.dist-info/namespace_packages.txt
 Comment: 
 
-Filename: KolejkaServer-0.1.202307311426.dist-info/top_level.txt
+Filename: KolejkaServer-0.1.202307311914.dist-info/top_level.txt
 Comment: 
 
-Filename: KolejkaServer-0.1.202307311426.dist-info/RECORD
+Filename: KolejkaServer-0.1.202307311914.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## kolejka/server/settings.py

```diff
@@ -134,11 +134,13 @@
 IMAGE_REGISTRY = None
 IMAGE_REGISTRY_NAME = 'kolejka_task'
 IMAGE_REGISTRY_USERNAME = None
 IMAGE_REGISTRY_PASSWORD = None
 
 USE_X_SENDFILE = False
 
+CALLBACK_USER_AGENT = 'kolejka-server'
+
 try:
     from kolejka.server.settings_local import *
 except ImportError:
     pass
```

## kolejka/server/task/views.py

```diff
@@ -2,14 +2,16 @@
 
 from django.conf import settings
 
 import json
 import logging
 import re
 import subprocess
+import threading
+import urllib.request
 import uuid
 
 from django.http import HttpResponse, HttpResponseForbidden, HttpResponseNotFound, HttpResponseNotAllowed, StreamingHttpResponse
 from django.views.decorators.csrf import csrf_exempt
 
 from kolejka.common.limits import KolejkaLimits
 from kolejka.common.task import KolejkaTask, KolejkaResult
@@ -123,14 +125,33 @@
         return OKResponse(deleted=True)
     if request.method == 'GET' or request.method == 'HEAD':
         response = dict()
         response['task'] = task.task().dump()
         return OKResponse(response)
     return HttpResponseNotAllowed(['HEAD', 'GET', 'POST', 'PUT', 'DELETE'])
 
+def result_callback(result):
+    url = result.task.task().callback_url
+    if url:
+        headers = dict()
+        headers['User-Agent'] = settings.CALLBACK_USER_AGENT
+        headers['Content-Type'] = 'application/json'
+        response = dict()
+        response['task'] = result.task.task().dump()
+        response['result'] = result.result().dump()
+        data = bytes(json.dumps(response), 'utf-8')
+        request = urllib.request.Request(url=url, data=data, headers=headers, method='POST')
+        def opener(request):
+            try:
+                response = urllib.request.urlopen(request)
+            except:
+                logging.warning(f'Callback \'{url}\' failed')
+                pass
+        threading.Thread(target=opener, args=[request]).run()
+
 def result(request, key=''):
     if request.method == 'POST':
         if key != '':
             return HttpResponseForbidden()
         if not request.user.has_perm('task.process_task'):
             return HttpResponseForbidden()
         r = KolejkaResult(None)
@@ -159,14 +180,15 @@
         result.save()
         for ref in refs:
             ref.user = task.user
             ref.save()
             result.files.add(ref)
         response = dict()
         response['result'] = result.result().dump()
+        result_callback(result)
         return OKResponse(response)
     if not request.user.is_authenticated:
         return HttpResponseForbidden()
     try:
         task = models.Task.objects.get(key=key)
         result = models.Result.objects.get(task=task)
     except models.Task.DoesNotExist:
```

## Comparing `KolejkaServer-0.1.202307311426-nspkg.pth` & `KolejkaServer-0.1.202307311914-nspkg.pth`

 * *Files identical despite different names*

## Comparing `KolejkaServer-0.1.202307311426.dist-info/RECORD` & `KolejkaServer-0.1.202307311914.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -1,12 +1,12 @@
-KolejkaServer-0.1.202307311426-nspkg.pth,sha256=ymghxcR0SaoJPJNC5JQSPrO2foeCxLaTaJ0CvL2Q_H4,544
+KolejkaServer-0.1.202307311914-nspkg.pth,sha256=ymghxcR0SaoJPJNC5JQSPrO2foeCxLaTaJ0CvL2Q_H4,544
 kolejka/server/__init__.py,sha256=Dopzv08sDQAyKquOE25DK76cxzKyMkhmOVDDlrshaFc,334
 kolejka/server/__nonpath__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/response.py,sha256=eAXX-1xNfDxPpRupjoavZqzYj7CjWpoHrRy_A01hVeU,804
-kolejka/server/settings.py,sha256=Q3m-1hcyBZQGW-4ILiwA5vdpTH6LcO8_D_Dt9TtRaUU,3351
+kolejka/server/settings.py,sha256=-IKh4SfqKPKjFSu-uKIDRpcM1GnNwf-yhdc94_Hj4ik,3391
 kolejka/server/urls.py,sha256=59Prqvb1flFznG5444oWexrPNISxtSGNxcjOW71MtCw,558
 kolejka/server/wsgi.py,sha256=5wFAdrz-1e9tzQSX_WxUB3UqxuTWXNcn_ykvY0hnpEE,268
 kolejka/server/blob/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/blob/__nonpath__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/blob/admin.py,sha256=le2Ha1gbYen7oeWQJTNs3c2bYc7UNOV2CKgektGBEPI,280
 kolejka/server/blob/models.py,sha256=PMZJO_YuoC3c0uUEvS6AtB-kf6En2oJlTwWnA32x1JI,3473
 kolejka/server/blob/tests.py,sha256=4K1JweMKgW6oIYWIZu8M_6WnGUtuccPf8jujJjIeXaI,101
@@ -43,25 +43,25 @@
 kolejka/server/queue/management/commands/unassign.py,sha256=g1F1_XL7Fn8-pYMSuxSjz8vps6G3pC2rjZT7hkWS_-8,774
 kolejka/server/task/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/task/__nonpath__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/task/admin.py,sha256=ptyT8fmyN0dqDAehUZBQmLyGi4Th2hu-1rxTAnpNWNk,274
 kolejka/server/task/models.py,sha256=9yPal6ydHlRGjEQoq0nFX4oBLhbeOaquw2jIVwTl6ig,2105
 kolejka/server/task/tests.py,sha256=4K1JweMKgW6oIYWIZu8M_6WnGUtuccPf8jujJjIeXaI,101
 kolejka/server/task/urls.py,sha256=OrbndmdrMuJm7e2m-XmLiH9ZLdXJHmsAqVZPkwin8EI,298
-kolejka/server/task/views.py,sha256=aCFeSCQCGVXOw2MG-Vk9DL3R2_HldV91JN8AJ_VNBPY,8550
+kolejka/server/task/views.py,sha256=0VqdSiTTePVnvz91g1DLK3tziNlqw8YuCc4DKzXWav8,9390
 kolejka/server/task/management/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/task/management/__nonpath__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/task/management/commands/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/task/management/commands/__nonpath__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/task/management/commands/lstask.py,sha256=zRswQq6lXeT0IOhwHTACjYa9N06-nsgHFbXQawmLH3I,844
 kolejka/server/task/management/commands/rmtask.py,sha256=eLX595QHafrhlKGtg02rMP8bkoqZpN7oPxSMOOt1ip4,812
 kolejka/server/task/migrations/0001_initial.py,sha256=b-80x7h_0eXq8cjbYuIxGSVTnvd1C9GoT2GszqD2sVo,2044
 kolejka/server/task/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/task/migrations/__nonpath__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/templates/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 kolejka/server/templates/__nonpath__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-KolejkaServer-0.1.202307311426.dist-info/METADATA,sha256=-jf8C-W6CR8RJoyHNBtQSgCiT4KERuo29fYjT5YnNKk,510
-KolejkaServer-0.1.202307311426.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-KolejkaServer-0.1.202307311426.dist-info/entry_points.txt,sha256=8f22n6zxhZbK4umLAL8uNX2SzTeqULf46horJK2SEeo,56
-KolejkaServer-0.1.202307311426.dist-info/namespace_packages.txt,sha256=JRltIMS23djVkt75McrNZpEyfqHwicCBrIZYwdn_g98,8
-KolejkaServer-0.1.202307311426.dist-info/top_level.txt,sha256=JRltIMS23djVkt75McrNZpEyfqHwicCBrIZYwdn_g98,8
-KolejkaServer-0.1.202307311426.dist-info/RECORD,,
+KolejkaServer-0.1.202307311914.dist-info/METADATA,sha256=UxlF9Onc_n3j9CbLoHNUtdF6Ggo2tRD_Qm1j8Etvge4,510
+KolejkaServer-0.1.202307311914.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+KolejkaServer-0.1.202307311914.dist-info/entry_points.txt,sha256=8f22n6zxhZbK4umLAL8uNX2SzTeqULf46horJK2SEeo,56
+KolejkaServer-0.1.202307311914.dist-info/namespace_packages.txt,sha256=JRltIMS23djVkt75McrNZpEyfqHwicCBrIZYwdn_g98,8
+KolejkaServer-0.1.202307311914.dist-info/top_level.txt,sha256=JRltIMS23djVkt75McrNZpEyfqHwicCBrIZYwdn_g98,8
+KolejkaServer-0.1.202307311914.dist-info/RECORD,,
```

